(this["webpackJsonpstore-quinteros-florencia"]=this["webpackJsonpstore-quinteros-florencia"]||[]).push([[0],{30:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),r=n.n(s),a=n(5),i=n.n(a),o=n(2),l=n(6),j=(n(30),function(e){return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"jumbotron jumbotron-fluid ",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("h1",{className:"display-4 animate__animated animate__fadeIn",children:"Rewards Store"}),Object(c.jsx)("p",{className:"lead animate__animated animate__fadeIn",children:e.subtitle})]})})})}),u=n(3),d=n.n(u),b=n(4),h={"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MDBmNTI2MTdlNzE4NzAwMjBlMzhlZTQiLCJpYXQiOjE2MTE2MTY4NjV9.66smQBQU8yIdqHDJyl9efNAbdagrgh9iU7Jf-KSKfXw"},O="https://coding-challenge-api.aerolab.co/user/me",m="https://coding-challenge-api.aerolab.co/user/points",x="https://coding-challenge-api.aerolab.co/redeem",f=function(){return Object(c.jsxs)("div",{className:"spinner",children:[Object(c.jsx)("div",{className:"double-bounce1"}),Object(c.jsx)("div",{className:"double-bounce2"})]})},p=function(e){var t=e.history;return e.loading?Object(c.jsx)(f,{}):Object(c.jsx)("div",{className:"container mt-5 mb-5",children:Object(c.jsxs)("table",{className:"table table-striped",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",children:"ID"}),Object(c.jsx)("th",{scope:"col",children:"Product name"}),Object(c.jsx)("th",{scope:"col",children:"Cost"})]})}),Object(c.jsx)("tbody",{children:t.map((function(e){return Object(c.jsxs)("tr",{scope:"row",children:[Object(c.jsx)("td",{children:e.productId}),Object(c.jsx)("td",{children:e.name}),Object(c.jsx)("td",{children:e.cost})]})}))})]})})};var g=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(!1),i=Object(o.a)(a,2),l=i[0],j=i[1];return Object(s.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,fetch("https://coding-challenge-api.aerolab.co/user/history",{method:"GET",headers:h});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r(n),j(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)(p,{history:n,loading:l})})};function v(){return Object(c.jsx)("div",{className:"nav d-flex justify-content-around navbar",children:Object(c.jsx)(l.a,{to:"/aerolab-challenge",style:{color:"#2a2a2a"},children:Object(c.jsxs)("div",{children:[Object(c.jsx)("i",{class:"fas fa-home",style:{color:"#ff8800",marginRight:5}}),"Home"]})})})}var N=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(v,{}),Object(c.jsx)(j,{subtitle:"Redeem History"}),Object(c.jsx)(g,{})]})},y=n(9),w=n.p+"static/media/coin.1fc21bda.svg",C=n(10);function P(){return(P=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O,{method:"GET",headers:h});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var S=function(){return P.apply(this,arguments)};function k(){return(k=Object(b.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(m,{method:"POST",headers:h,body:JSON.stringify({amount:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var _=function(e){return k.apply(this,arguments)};function I(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(s.useContext)(X).setUserPoints,i=Object(s.useState)(!1),l=Object(o.a)(i,2),j=l[0],u=l[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"btns-container",children:[Object(c.jsx)("button",{onClick:function(){return _(1e3).then((function(e){return r(e.message),a(e["New Points"]),u(!0)})).then((function(){return u(!1)}))},className:"btn btn-warning",id:"btn-coins",children:"1000"}),Object(c.jsx)("button",{onClick:function(){return _(5e3).then((function(e){return r(e.message),a(e["New Points"]),u(!0)})).then((function(){return u(!1)}))},className:"btn btn-warning",id:"btn-coins",children:"5000"}),Object(c.jsx)("button",{onClick:function(){return _(7500).then((function(e){return r(e.message),a(e["New Points"]),u(!0)})).then((function(){return u(!1)}))},className:"btn btn-warning",id:"btn-coins",children:"7500"})]}),Object(c.jsx)("p",{style:{textAlign:"center",fontWeight:"bold",marginTop:15},children:1==j?Object(c.jsx)(f,{}):Object(c.jsx)("p",{className:"text-success",children:n})})]})}var E=document.getElementById("modal-addCoins");var F=function(e){var t=e.isOpen,n=e.hide;return t?Object(a.createPortal)(Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"modal_container",children:Object(c.jsx)("div",{className:"modal-dialog",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h5",{className:"modal-title",children:"Add more coins"}),Object(c.jsx)("button",{type:"button",className:"close",onClick:n,children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsx)("div",{className:"modal-body",children:Object(c.jsx)(I,{})})]})})})}),E):null},T=function(){var e=Object(s.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1];return{isOpen:n,toggle:function(){c(!n)}}};function J(){var e=Object(y.a)(["\n  width: 60%;\n  height: 48px;\n  justify-content: space-around;\n  align-items: center;\n  background-color: #ededed;\n  border-radius: 50px;\n  display: flex;\n  padding: 10px;\n"]);return J=function(){return e},e}function U(){var e=Object(y.a)(["\n  font-weight: 500;\n  width: 12%;\n  display: flex;\n  align-items: center;\n  justify-content: space-evenly;\n  color: #0d0d0d;\n"]);return U=function(){return e},e}function M(){var e=Object(y.a)(["\n  font-weight: 300;\n  &:hover {\n    cursor: pointer;\n  }\n"]);return M=function(){return e},e}var R=C.a.div(M()),A=C.a.div(U()),B=C.a.div(J());var L=function(){var e=Object(s.useContext)(X),t=e.userName,n=e.userPoints,r=e.setUserName,a=e.setUserPoints,i=T(),o=i.isOpen,j=i.toggle;return Object(s.useEffect)((function(){S().then((function(e){return r(e.name),a(e.points)}))}),[]),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"nav d-flex justify-content-around navbar",children:[Object(c.jsxs)("div",{className:"header__actions d-flex justify-content-between",style:{width:"20%"},children:[Object(c.jsxs)(R,{onClick:j,children:[Object(c.jsx)("i",{className:"fas fa-plus-circle coin",style:{color:"#ffcf00",marginRight:5}}),"Add more coins"]}),Object(c.jsx)(F,{isOpen:o,hide:j}),Object(c.jsx)(l.a,{to:"/aerolab-challenge-history",style:{color:"#2a2a2a"},children:Object(c.jsxs)(R,{children:[Object(c.jsx)("i",{className:"fas fa-history history",style:{color:"#ff8800",marginRight:5}}),"Redeem history"]})})]}),Object(c.jsxs)(A,{children:[null!=t?t:"",Object(c.jsxs)(B,{children:[""!=n?n:"",Object(c.jsx)("img",{src:w,alt:"Coin"})]})]})]})})};function z(){return(z=Object(b.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(x,{method:"POST",headers:h,body:JSON.stringify({productId:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var Q=function(e){return z.apply(this,arguments)},G=document.getElementById("modal-addCoins"),H=function(e){var t=e.isOpen,n=e.hide,r=e.id,i=e.producto,l=Object(s.useState)(""),j=Object(o.a)(l,2),u=j[0],d=j[1],b=Object(s.useState)(!1),h=Object(o.a)(b,2),O=h[0],m=h[1],x=Object(s.useState)(""),p=Object(o.a)(x,2),g=p[0],v=p[1],N=Object(s.useContext)(X),y=N.userPoints,w=N.setUserPoints;return t?Object(a.createPortal)(Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"modal_container modal-redeem",children:Object(c.jsx)("div",{className:"modal-dialog",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h5",{className:"modal-title",children:"Redeem"}),Object(c.jsx)("button",{type:"button",className:"close",onClick:function(){n(),d("")},children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsxs)("div",{className:"modal-body",children:["Are you sure?",Object(c.jsxs)("div",{className:"btns",id:"btns",children:[Object(c.jsx)("button",{className:"btn btn-warning mt-3",type:"button",onClick:function(){try{Q(r).then((function(e){return d(e.message),m(!0),y<i.cost?w(y):w(y-i.cost),v(e.error)})).then((function(){return m(!1)}))}catch(g){v(g)}},children:"Yes!"}),Object(c.jsx)("button",{className:"btn btn-warning mt-3",type:"button",onClick:n,children:"Mmm no"})]}),1==O?Object(c.jsx)(f,{}):Object(c.jsx)("p",{className:u?"text-success mt-3":"text-danger mt-3",children:u||g})]})]})})})}),G):null},Y=function(e){var t=e.data,n=e.loading,r=Object(s.useState)(""),a=Object(o.a)(r,2),i=a[0],l=(a[1],T()),j=l.isOpen,u=l.toggle,d=Object(s.useContext)(X).userPoints,b=Object(s.useState)(""),h=Object(o.a)(b,2),O=h[0],m=h[1],x=Object(s.useState)([]),p=Object(o.a)(x,2),g=p[0],v=p[1];return n?Object(c.jsx)(f,{}):Object(c.jsx)("div",{className:"cards-container",children:Object(c.jsxs)("div",{className:"card",style:{width:"18rem"},children:[Object(c.jsx)("img",{className:"card-img-top",src:t.img.hdUrl,alt:t.name}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h5",{className:"card-title",children:t.name}),Object(c.jsx)("h6",{className:"card-subtitle mb-2 font-weight-light",children:t.category}),Object(c.jsxs)("p",{className:"card-text",children:[t.cost," ",Object(c.jsx)("i",{className:"fas fa-coins",style:{color:"#ffa900"}})]}),Object(c.jsx)("button",{className:"btn btn-card",type:"button",onClick:function(){m(t._id),v(t),u()},id:"btn-redeem",disabled:t.cost>d,children:t.cost>=d?"You need ".concat(t.cost-d," points"):"Redeem Now"})]}),Object(c.jsx)(H,{isOpen:j,hide:u,message:i,id:O,producto:g})]})})},q=function(e,t){var n=r.a.useState(1),c=Object(o.a)(n,2),s=c[0],a=c[1],i=Math.ceil(e.length/t),l=e.slice((s-1)*t,s*t);return{next:function(){a(s+1)},prev:function(){a(s-1)},jump:function(e){a(e)},currentPage:s,maxPage:i,currentArray:l}};function D(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),j=l[0],u=l[1],O=Object(s.useContext)(X),m=O.setProductsList,x=(O.productsList,O.category,r.a.useState("recent")),p=Object(o.a)(x,2),g=p[0],v=p[1];Object(s.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,fetch("https://coding-challenge-api.aerolab.co/products",{method:"GET",headers:h});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a(n),u(!1),m(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var N=q(function(){switch(g){case"lowPrice":return n.sort((function(e,t){return parseFloat(e.cost)-parseFloat(t.cost)})).map((function(e,t){return Object(c.jsx)(Y,{data:e},t)}));case"highPrice":return n.sort((function(e,t){return parseFloat(t.cost)-parseFloat(e.cost)})).map((function(e,t){return Object(c.jsx)(Y,{data:e},t)}));default:return n.sort((function(e,t){return e._id<t._id?-1:1})).map((function(e,t){return Object(c.jsx)(Y,{data:e},t)}))}}(),16),y=N.currentArray,w=N.next,C=N.prev,P=N.maxPage,S=N.currentPage;return Object(c.jsxs)("div",{className:"container animate__animated animate__backInUp",children:[Object(c.jsxs)("section",{className:"d-flex justify-content-center mt-5",children:[Object(c.jsx)("button",{className:"btnFilter btn",onClick:function(){return v("recent")},children:"Most recent"}),Object(c.jsx)("button",{className:"btnFilter btn",onClick:function(){return v("lowPrice")},children:"Lowest price"}),Object(c.jsx)("button",{className:"btnFilter btn",onClick:function(){return v("highPrice")},children:"Highest price"})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"container",style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:j?y:Object(c.jsx)(f,{})}),Object(c.jsx)("hr",{}),Object(c.jsxs)("section",{className:"d-flex justify-content-center mb-5",children:[Object(c.jsx)("button",{className:"btnPaginationLeft btn",onClick:function(){return C()},disabled:S<=1,children:"Next"}),Object(c.jsx)("button",{className:"btnPaginationRight btn",onClick:function(){return w()},disabled:S>=P,children:"Prev"})]})]})}var W=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(L,{}),Object(c.jsx)(j,{subtitle:"Electronics"}),Object(c.jsx)(D,{})]})},X=Object(s.createContext)();var K=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(""),i=Object(o.a)(a,2),j=i[0],u=i[1],d=Object(s.useState)([]),b=Object(o.a)(d,2),h=b[0],O=b[1],m=Object(s.useState)({category:""}),x=Object(o.a)(m,2),f=x[0],p=x[1];return Object(c.jsx)(X.Provider,{value:{userName:n,setUserName:r,userPoints:j,setUserPoints:u,productsList:h,setProductsList:O,category:f,setCategory:p},children:Object(c.jsxs)(l.b,{children:[Object(c.jsx)(N,{exact:!0,path:"/aerolab-challenge-history"}),Object(c.jsx)(W,{exact:!0,path:"/aerolab-challenge"})]})})};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(K,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.d5343551.chunk.js.map